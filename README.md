# georgsold_infra
## Обязательные параметры:

```

testapp_IP = 35.187.189.13
testapp_IP = 35.189.195.172
testapp_port = 9292

```

## Сделано:
0. Прочитаны маны по ресурсам GCP и ссылки на terraform - реально хорошо наптсано и почти сразу понятно, что и как делать с ДЗ. 
1. Выполнены задачи по ДЗ: установлен terraform, созданы конфигурационные файлы, выполнено развертывание (на том этапе нельзя подключиться, послкольку удалены ключи - зачем вопрос, если дальше сразу на него дается ответ?), описаны input и output переменные (кстати, раз уж в pdf везде есть ссылки на исходник команды, то и на слайде №25 вместо рисунка можно дать ссылку - даешь единообразие в документации! :) ), добавлено правило для firewall`а, тег и вызов провижнов для деплоя приложения.
2. Определены input переменные для приватного ключа (для провижнов) и зоны (задано значение по умолчанию).
3. Применено форматирование файлов terraform fmt (хотя для этого пришлось их специально "попортить", т.к. изначально использовался редактор с поддержкой форматирования).
4. Создан тестовый terraform.tfvars.example с предложенными в ДЗ значениями.
5. Добавлен ресурс для новых ключей appuser1-2 - пришлось поискать правильный синтаксис, помог гугл и запрос terraform multiple ssh keys :)

```

https://www.terraform.io/docs/providers/google/r/compute_project_metadata.html - Такой вариант добавляет метадату для всех инстансов в проекте.

```

6. Проверено, что добавленные через вебку ключи затираются после следующего apply.
7. Спасибо ссылкам в ДЗ - добавлена балансировка (сначала вручную :( ) через networking->network services->load balancing. Вторую ноду можно добавить копипастом ресурса первой (с изменением индекса в имени). Повторное описание для второй ноды увеличивает объем кода и может сделать его не читаемым и трудноизменяемым (возможны ошибки при правке одинаковых полей). Кстати, удалите со слайда №55 фразу про нерациональность - смысл вопроса теряется, т.к. сразу дается ответ (имхо).
8. Задано число создаваемых нод через переменную count. Исправлено правило для output переменной через перечисление всех нод "*". Кстати, нумерация yод идет с "0", что немного не согласуется с ДЗ :Р
9. Проверено на работоспособность путем выклчения сервиса на одной из нод.
П.С. после выполнения ДЗ пересмотр лекции дался гораздо понятнее :)

## Как проверить:

Пройти по app_frontend_ip = 35.205.95.191:9292.
